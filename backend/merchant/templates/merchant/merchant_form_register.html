{% load static %}
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.0/css/all.min.css" />
    <link rel="stylesheet" href="{% static 'css/m_register.css' %}" />
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
    <title>Grubmate-Merchant_Registration</title>
  </head>
  <body>
    <main>
      <div>
        <div id="changerole-maincontainer">
          <div id="changerole-subcontainer">
            <div>
              <div class="role-btn role-active">
                <h4>merchant</h4>
              </div>
              <div class="role-btn">
                <h4>deliveryman</h4>
              </div>
            </div>
          </div>
          <div id="goback">
            <a href=""><i class="fa-solid fa-circle-xmark"></i></a>
          </div>
        </div>
        <div id="merchantreg-main">
          <form action="{% url 'merchant_register' %}?role=restaurant" method="POST">
            {% csrf_token %}
            <!-- hidden role field -->
            <input type="hidden" name="role" value="restaurant" />

              {% if form.errors %}
              <ul>
                {% for field in form %}
                  {% for error in field.errors %}
                    <li>{{ field.label }}: {{ error }}</li>
                  {% endfor %}
                {% endfor %}
              </ul>
            {% endif %}
            <div id="mainform">
              <div class="form-head">
                <i class="fa-solid fa-circle-info"></i>
                <h3>General Information</h3>
              </div>
              <div class="form-body">
                <div class="ip">
                  <div>
                    <label for="restaurant-name">Restaurant Name</label>
                  </div>
                  <div>
                    <input type="text" id="restaurant-name" name="restaurant_name" {{ form.restaurant_name.value|default_if_none:'' }} required />
                  </div>
                </div>

                <div class="ip">
                  <div>
                    <label for="owner-name">Owner Name</label>
                  </div>
                  <div>
                    <input type="text" id="owner-name" name="owner_name" {{ form.owner_name.value|default_if_none:'' }} required />
                  </div>
                </div>

                <div class="ip">
                  <div>
                    <label for="contact">Contact Number</label>
                  </div>
                  <div>
                   <input type="tel"
                    id="owner_contact"
                    name="owner_contact"
                    value="{{ form.owner_contact.value|default_if_none:'' }}"
                    required />

                  </div>
                </div>

                <div class="ip">
                  <div>
                    <label for="email" >Email Address</label>
                  </div>
                  <div>
                    <input type="email" id="email" name="email" {{ form.owner_email.value|default_if_none:'' }}  required />
                  </div>
                </div>

                <div class="ip">
                  <div>
                    <label for="address">Restaurant Address</label>
                  </div>
                  <div>
                    <input type="text" id="restaurant_address" name="restaurant_address" value="{{ form.restaurant_address.value|default_if_none:'' }}" required />
                  </div>
                </div>

                <div class="ip">
                  <div>
                    <label for="cuisine">Cuisine Type</label>
                  </div>
                  <div>
                    <input type="text" id="cuisine" name="cuisine" {{ form.cuisine.value|default_if_none:'' }} required />
                  </div>
                </div>

                <div class="ip description">
                  <div>
                    <label for="description">Restaurant Description</label>
                  </div>
                  <div>
                    <textarea id="description" name="description" rows="4" {{ form.description.value|default_if_none:'' }} required></textarea>
                  </div>
                </div>
                  <div class="ip">
  <div>
    <label for="restype">Business Type</label>
  </div>
  <div class="select-wrapper">
    <select id="restype" name="restaurant_type" required>
      <option value="local" {% if form.restaurant_type.value == "local" %}selected{% endif %}>Local</option>
      <option value="fine_dining" {% if form.restaurant_type.value == "fine_dining" %}selected{% endif %}>Fine Dining</option>
    </select>
    <i class="fa-solid fa-square-caret-down"></i>
  </div>
</div>

              </div>
            </div>
            <div id="formmap">
          <div id="formmap-subcontainer">
            <div class="form-head">
              <i class="fa-solid fa-location-dot"></i>
              <h3>Select Location on Map</h3>
            </div>
            <div class="position-container">
              <div class="ip">
                <div>
                  <label>Latitude</label>
                </div>
                <div>
                  <input type="text" id="lat" name="latitude" readonly value="{{ form.latitude.value|default_if_none:'' }}" />
                </div>
              </div>
              <div class="ip">
                <div>
                  <label>Longitude</label>
                </div>
                <div>
                  <input type="text" id="lng" name="longitude" readonly value="{{ form.longitude.value|default_if_none:'' }}" />
                </div>
              </div>
            </div>
            <div id="map"></div>
            <div class="submit-wrapper" id="merchant-submit">
              <button id="merchant-submit-btn" type="submit">Submit</button>
            </div>
          </div>
        </div>

          </form>
        </div>

       <div id="deliveryboyreg-main">
  <form action="{% url 'merchant_register' %}?role=deliveryman" method="post" enctype="multipart/form-data">
    {% csrf_token %}
    <!-- hidden role field -->
    <input type="hidden" name="role" value="deliveryman" />

    {% if form.errors %}
      <div class="error-container">
        <ul>
          {% for field in form %}
            {% for error in field.errors %}
              <li>
                <strong>{{ field.label }}:</strong> {{ error }}
              </li>
            {% endfor %}
          {% endfor %}
          {% for error in form.non_field_errors %}
            <li>{{ error }}</li>
          {% endfor %}
        </ul>
      </div>
    {% endif %}
    <div id="mainform">
      <div class="form-head">
        <i class="fa-solid fa-circle-info"></i>
        <h3>General Information</h3>
      </div>
      <div class="form-body">
        <div class="ip">
          <div>
            <label for="first_name">First Name</label>
          </div>
          <div>
            <input type="text" id="first-name" name="Firstname" value="{{ form.Firstname.value|default_if_none:'' }}" required />
          </div>
        </div>

        <div class="ip">
          <div>
            <label for="last_name">Last Name</label>
          </div>
          <div>
            <input type="text" id="last-name" name="Lastname" value="{{ form.Lastname.value|default_if_none:'' }}" required />
          </div>
        </div>

        {% comment %} <div class="ip">
          <div>
            <label for="contact">Contact Number</label>
          </div>
          <div>
            <input type="tel" id="contact" name="contact" required />
          </div>
        </div>

        <div class="ip">
          <div>
            <label for="email">Email Address</label>
          </div>
          <div>
            <input type="email" id="email" name="email" required />
          </div>
        </div> {% endcomment %}

        <div class="ip">
          <div>
            <label for="address">Current Address</label>
          </div>
          <div>
            <input type="text" id="address" name="Address" value="{{ form.Address.value|default_if_none:'' }}" required />
          </div>
        </div>

        <div class="ip">
          <div>
            <label for="deliveryboy_image">Deliveryman Image</label>
          </div>
          <div>
            <!-- file inputs don't use value="" in HTML; Django shows current file elsewhere if needed -->
            <input type="file" id="identityimage" name="UserImage" accept="image/*" required />
          </div>
        </div>

        <div class="ip">
          <div>
            <label for="pan_number">Pan Number</label>
          </div>
          <div>
            <input type="text" id="pan-number" name="PanNumber" value="{{ form.PanNumber.value|default_if_none:'' }}" required />
          </div>
        </div>

        <div class="ip">
          <div>
            <label for="dob">Date of Birth</label>
          </div>
          <div>
            <input type="date" name="DateofBirth" id="dob" value="{{ form.DateofBirth.value|default_if_none:'' }}" required />
          </div>
        </div>
      </div>
    </div>

    <div id="additionalform">
      <div class="form-head">
        <i class="fa-solid fa-plus"></i>
        <h3>Additional Information</h3>
      </div>
      <div class="additional-body">
        <div class="ip">
          <div>
            <label for="vehicletype">Vehicle</label>
          </div>
          <div class="select-wrapper">
            <select id="vehicletype" name="Vehicle" required>
              <option value="" disabled {% if not form.Vehicle.value %}selected{% endif %}>Select Vehicle</option>
              {% for val, label in form.Vehicle.field.choices %}
                <option value="{{ val }}" {% if form.Vehicle.value == val %}selected{% endif %}>{{ label }}</option>
              {% endfor %}
            </select>
            <i class="fa-solid fa-square-caret-down"></i>
          </div>
        </div>

        <div class="ip">
          <div>
            <label for="deliveryzone">Delivery zone</label>
          </div>
          <div class="select-wrapper">
            <select id="deliveryzone" name="Zone" required>
              <option value="" disabled {% if not form.Zone.value %}selected{% endif %}>Select Delivery Zone</option>
              {% for val, label in form.Zone.field.choices %}
                <option value="{{ val }}" {% if form.Zone.value == val %}selected{% endif %}>{{ label }}</option>
              {% endfor %}
            </select>
            <i class="fa-solid fa-square-caret-down"></i>
          </div>
        </div>

        <div class="ip">
          <div>
            <label for="duty_time">Duty Time</label>
          </div>
          <div class="select-wrapper">
            <select id="duty-time" name="DutyTime" required>
              <option value="" disabled {% if not form.DutyTime.value %}selected{% endif %}>Select Duty Time</option>
              {% for val, label in form.DutyTime.field.choices %}
                <option value="{{ val }}" {% if form.DutyTime.value == val %}selected{% endif %}>{{ label }}</option>
              {% endfor %}
            </select>
            <i class="fa-solid fa-square-caret-down"></i>
          </div>
        </div>

        <div class="ip">
          <div>
            <label for="vehicle_number">Vehicle Number</label>
          </div>
          <div>
            <input type="text" id="vehicle-number" name="VehicleNumber" placeholder="eg: BA-01-PA-1234" value="{{ form.VehicleNumber.value|default_if_none:'' }}" required />
          </div>
        </div>

        <div class="ip">
          <div>
            <label for="contact">BlueBook Scan Copy</label>
          </div>
          <div>
            <!-- file inputs don't use value="" in HTML -->
            <input type="file" name="BillBookScanCopy" id="billBook" accept="image/*,application/pdf" required />
          </div>
        </div>

        <div class="submit-wrapper" id="deliveryboy-submit">
          <button id="merchant-submit-btn" type="submit">Submit</button>
        </div>
      </div>
    </div>
  </form>
</div>

        </div>
      </div>
    </main>
    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="{% static 'scripts/m_register.js' %}"></script>
  </body>
</html>
